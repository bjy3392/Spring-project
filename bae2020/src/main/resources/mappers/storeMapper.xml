<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.bae2020.dao.StoreDao">
	
	<select id="findStoreByMid" resultType="com.spring.bae2020.vo.StoreVo">
		select * from store where manager=#{mid};
	</select>
	
	<update id="updateOrderByState">
		update orders set state=#{state} , update_dt=now() where order_idx=#{order_idx};
	</update>
	
	<update id="updateStoreByOpen">
		update store set open_yn=#{open_yn} where store_code=#{store_code};
	</update>
	
	<select id="findOrderByDeliveryState" resultType="com.spring.bae2020.vo.OrdersVo">
		select orders.*, state.state_name
		  from orders
		 inner join state 
		    on orders.state = state.state_code
		 where 1=1
		   and store=#{store_code}
		   and state in ('state-03', 'state-04');
	</select>
	
</mapper>